<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
      <meta http-equiv="Pragma" content="no-cache" />
      <meta http-equiv="Expires" content="0" />
      <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
      <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0 maximum-scale=1.0">
      <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
      <title>Shop&Go katalog - Poƒçetna</title>
      <link rel="shortcut icon" type="image/jpg" href="https://maxi.sales-snap.com/asset/387:shopngofaviconpng"/>
      <meta property="og:image" content="https://maxi.sales-snap.com/asset/387:shopngofaviconpng"/>
      <meta property="og:image:type" content="image/png"/>
      <meta property="og:image:width" content="1024"/>
      <meta property="og:image:height" content="1024"/>
      <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

      <!-- redesign  -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

      <!-- <link rel="stylesheet" type="text/css" href="css/redesign.css"/> -->
      <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
      <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
      <!-- redesign -->

      <!-- Google Tag Manager -->
      
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TLXTJG8');</script>
      <!-- End Google Tag Manager -->
      <link rel="stylesheet" type="text/css" href="css/globali.css"/>
      <!--<link rel="stylesheet" type="text/css" href="css/kategorija.css"/>-->
    

      <link rel="stylesheet" type="text/css" href="css/dinamika.css"/>


   </head>
   <body>

      <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TLXTJG8"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
      
      
      <script>
         
            function determineWindowWidth(procenat, selektor) {
              var procenat_sirine = procenat
              setTimeout(function() {
                // console.log(selektor)
                var width = window.innerWidth * procenat_sirine / 100
                document.querySelector(selektor).style.width =  width
                document.querySelector(selektor).style.display = 'block'
              }, 500)
                 
         
             }
        
            //  setTimeout(function() {
            //      // document.getElementById('glavni-kontejner').style = 'display:block;'
         
            //      document.getElementsByClassName('header-div')[0].style = 'visibility:visible;'
         
            //      setTimeout(function() {
            //          document.getElementsByClassName('online-katalog-slika-div')[0].style = 'visibility:visible;'
         
            //          setTimeout(function() {
            //              document.getElementsByClassName('kategorije-div')[0].style = 'visibility:visible;'
         
            //              setTimeout(function() {
            //                  document.getElementsByClassName('tabela-proizvoda-div')[0].style = 'visibility:visible;'
         
            //                  setTimeout(function() {
            //                      // if(window.innerWidth < 1000) document.getElementsByClassName('ljubicasta-pozadina')[0].style = 'display:block;'
            //                      //     else document.getElementsByClassName('ljubicasta-pozadina')[0].style = 'display:flex;'
         
            //                      document.getElementsByClassName('ljubicasta-pozadina')[0].style = 'visibility:visible;'
            //                  }, 1000)
         
            //              }, 400) 
         
            //          }, 800) 
         
            //      }, 400)    
                 
                 
            //  }, 1000)
         
            function getMobileOperatingSystem() {
                 var userAgent = navigator.userAgent || navigator.vendor || window.opera;
         
                 if (/huawei/i.test(userAgent)) {
                     window.location = 'https://appgallery.huawei.com/app/C105399993'
                     return "https://my-link.com";
                 }
         
                 // Windows Phone must come first because its UA also contains "Android"
                 if (/windows phone/i.test(userAgent)) {
                     return "Windows Phone";
                 }
         
                 if (/android/i.test(userAgent)) {
                     window.location = 'https://play.google.com/store/apps/details?id=com.delhaize.maxi.loyalty'
                     return "Android";
                 }
         
                 // iOS detection from: http://stackoverflow.com/a/9039885/177710
                 if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                     window.location = 'https://apps.apple.com/us/app/moj-maxi/id1557471653'
                     return "iOS";
                 }
                 
                 window.location = 'https://maxi.sales-snap.com/r/2b56164b6fb54e7012dd594cb?ct=YTozOntzOjg6ImZvY3VzX2lkIjtpOjE7czo0OiJsZWFkIjtzOjc6IjEyODE2MTAiO3M6NzoiY2hhbm5lbCI7YToxOntzOjU6ImZvY3VzIjtpOjE7fX0%3D&'
                 return "unknown";
             }


            async function getData() {
                const response = await fetch('tabele/pocetna.csv', {cache:"no-store"});
                // const response = await fetch('https://maxi.sales-snap.com/asset/194:nazivi-i-cene-artikala-za-digital-lifletcsv');
                const data = await response.text();
                
                const name_row = data.split('\n')

                const rows = data.split('\n').slice(1)

                var counter = 0;

                var red = 0;
                
                // KREIRANJE HTML ELEMENATA ZA ARTIKLE
                rows.forEach(element => {
                    const row = element.split(';')
                    const  kategorija = row[0]
                    const naziv = row[1]
                    const stara_cena = row[2]
                    const nova_cena = row[3]
                    const popust = row[4]
                    const url = row[5]
                    const trajanje = row[6]
                    const vazenje = row[7]

                  if(counter % 4 == 0 || counter == 0) {

                    if(kategorija == '5') {
                          
                          var tabela_row = document.createElement('div') 
                          tabela_row.setAttribute('class', 'proizvodi-row')
                          var row_id = 'proizvodi-row-' + red
                          tabela_row.setAttribute('id', row_id)
                          // '<div class="proizvodi-row" id="proizvodi-row-' + counter + '"</div>'
                            //  console.log(tabela_row)
                          document.getElementById('tabela-proizvoda').append(tabela_row)

                          var cell = document.createElement('div')
                          cell.setAttribute('class', 'prozivodi-cell')
                          cell.setAttribute('id', 'cell-' + counter)

                        //   var link = document.createElement('a')
                        //   var homepage = 'https://maxi.sales-snap.com/page/preview/20'
                        //   link.setAttribute('href', homepage)
                        //   link.setAttribute('target', '_self')
                        //   link.setAttribute('id', 'link-' + counter)

                          var razmak = document.createElement('br')

                          var slika = document.createElement('img')
                          slika.setAttribute('src', url)
                          slika.setAttribute('id', 'slika-' + counter)

                        //   link.append(slika)

                          var naziv_1 = document.createElement('div')
                          naziv_1.setAttribute('id', 'naziv-' + counter)
                          naziv_1.setAttribute('class', 'naziv-proizvoda')
                          
                          naziv_1.innerHTML = naziv

                          var stara_cena_1 = document.createElement('div')
                          stara_cena_1.setAttribute('id', 'stara-cena-' + counter)
                          var stara_cena_tekst = stara_cena.split('.')
                          
                          if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                          else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                        //   var nova_cena_1 = document.createElement('div')
                        //   nova_cena_1.setAttribute('id', 'nova-cena-' + counter)
                        //   var nova_cena_tekst = nova_cena.split('.')
                        //   if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                        //   else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                        //   var popust_1 = document.createElement('div')
                        //   popust_1.setAttribute('id', 'popust-' + counter)
                        //   popust_1.innerHTML = popust


                        //   cell.append(link)
                        //   cell.append(naziv_1)
                        //   cell.append(stara_cena_1)
                        //   cell.append(nova_cena_1)
                        //   cell.append(popust_1)

                          var inner_cell_1 = document.createElement('div')
                          inner_cell_1.setAttribute('class', 'div-inside')
                          inner_cell_1.append(slika)

                        //   var popust_container = document.createElement('div')
                        //   popust_container.setAttribute('class', 'crveni-krug')
                          inner_cell_1.append(naziv_1)
                        //   popust_container.append(popust_1)

                          
                        //   inner_cell_1.append(popust_container)

                        
                        var inner_cell_2 = document.createElement('div')
                        inner_cell_2.setAttribute('class', 'div-inside')
                        // inner_cell_2.append(naziv_1)

                        var zuti_cenovnik = document.createElement('div')
                        zuti_cenovnik.setAttribute('class', 'zuti-cenovnik plava-cena')

                        var cenovnik_left = document.createElement('div')
                        cenovnik_left.setAttribute('class', 'cenovnik-left')
                        cenovnik_left.append(stara_cena_1)

                        // var cenovnik_right = document.createElement('div')
                        // cenovnik_right.setAttribute('class', 'cenovnik-right')
                        // cenovnik_right.append(stara_cena_1)

                        zuti_cenovnik.append(cenovnik_left)
                        // zuti_cenovnik.append(cenovnik_right)

                        inner_cell_2.append(zuti_cenovnik)


                          var outer_cell = document.createElement('div')
                          outer_cell.setAttribute('class', 'slicica-div')
                          outer_cell.append(inner_cell_1)
                          outer_cell.append(inner_cell_2)
                        //   outer_cell.append(cell)

                        var outer_outer_cell = document.createElement('div')
                        outer_outer_cell.setAttribute('class', 'spoljni-div')
                        outer_outer_cell.append(outer_cell)


                        
                            var rok = document.createElement('div')
                            rok.setAttribute('class', 'trajanje')
                            if(trajanje != undefined) rok.append(trajanje)
                            outer_outer_cell.append(rok)
                            
                            var lokacija = document.createElement('div')
                            lokacija.setAttribute('class', 'lokacija')
                            if(vazenje != undefined) lokacija.append(vazenje)
                            outer_outer_cell.append(lokacija)
                        // console.log(vazenje)

                        tabela_row.append(outer_outer_cell)

                          red++;
                    } else {

                      
                      var tabela_row = document.createElement('div') 
                      tabela_row.setAttribute('class', 'proizvodi-row')
                      var row_id = 'proizvodi-row-' + red
                      tabela_row.setAttribute('id', row_id)
                      document.getElementById('tabela-proizvoda').append(tabela_row)

                      var cell = document.createElement('div')
                      cell.setAttribute('class', 'prozivodi-cell')
                      cell.setAttribute('id', 'cell-' + counter)

                      var razmak = document.createElement('br')

                      var slika = document.createElement('img')
                      slika.setAttribute('src', url)
                      slika.setAttribute('id', 'slika-' + counter)

                      var naziv_1 = document.createElement('div')
                      naziv_1.setAttribute('id', 'naziv-' + counter)
                      naziv_1.setAttribute('class', 'naziv-proizvoda')

                      naziv_1.innerHTML = naziv

                      var stara_cena_1 = document.createElement('div')
                      stara_cena_1.setAttribute('id', 'stara-cena-' + counter)
                      stara_cena_1.setAttribute('data-id', stara_cena)
                      var stara_cena_tekst = stara_cena.split('.')
                      
                      if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                      else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                      var nova_cena_1 = document.createElement('div')
                      nova_cena_1.setAttribute('id', 'nova-cena-' + counter)
                      nova_cena_1.setAttribute('data-id', nova_cena)
                      var nova_cena_tekst = nova_cena.split('.')
                      if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                      else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                      var popust_1 = document.createElement('div')
                      popust_1.setAttribute('id', 'popust-' + counter)
                      popust_1.innerHTML = popust


                      var inner_cell_1 = document.createElement('div')
                      inner_cell_1.setAttribute('class', 'div-inside')
                      inner_cell_1.append(slika)

                      var popust_container = document.createElement('div')
                      popust_container.setAttribute('class', 'crveni-krug')
                      inner_cell_1.append(naziv_1)
                      popust_container.append(popust_1)

                      
                      inner_cell_1.append(popust_container)

                    
                      var inner_cell_2 = document.createElement('div')
                      inner_cell_2.setAttribute('class', 'div-inside')
                      // inner_cell_2.append(naziv_1)

                      var zuti_cenovnik = document.createElement('div')
                      zuti_cenovnik.setAttribute('class', 'zuti-cenovnik')

                      var cenovnik_left = document.createElement('div')
                      cenovnik_left.setAttribute('class', 'cenovnik-left')
                      cenovnik_left.append(nova_cena_1)

                      var cenovnik_right = document.createElement('div')
                      cenovnik_right.setAttribute('class', 'cenovnik-right')
                      cenovnik_right.append(stara_cena_1)

                      zuti_cenovnik.append(cenovnik_left)
                      zuti_cenovnik.append(cenovnik_right)

                      inner_cell_2.append(zuti_cenovnik)


                      var outer_cell = document.createElement('div')
                      outer_cell.setAttribute('class', 'slicica-div')
                      outer_cell.append(inner_cell_1)
                      outer_cell.append(inner_cell_2)
                    //   outer_cell.append(cell)

                      var outer_outer_cell = document.createElement('div')
                      outer_outer_cell.setAttribute('class', 'spoljni-div')
                      outer_outer_cell.append(outer_cell)


                      var rok = document.createElement('div')
                      rok.setAttribute('class', 'trajanje')
                      
                      if(trajanje != undefined) rok.append(trajanje)
                      outer_outer_cell.append(rok)
                        
                      var lokacija = document.createElement('div')
                      lokacija.setAttribute('class', 'lokacija')
                      
                      if(vazenje != undefined) lokacija.append(vazenje)
                      outer_outer_cell.append(lokacija)


                      tabela_row.append(outer_outer_cell)


                      // KALKULATOR START
                      var kalkulator = document.createElement('div')
                      kalkulator.setAttribute('class', 'kalkulator')
                      
                      
                      var selektor_kalkulatora = document.createElement('div')
                      selektor_kalkulatora.setAttribute('class','selektor-kalkulatora')
                      
                      var cekboks = document.createElement('input')
                      cekboks.setAttribute('class','cekboks-kalkulatora')
                      cekboks.setAttribute('type', 'checkbox')
                      
                      var span_cekboks = document.createElement('span')
                      span_cekboks.setAttribute('class', 'checkmark')
                      
                      var telo_kalkulatora = document.createElement('div')
                      telo_kalkulatora.setAttribute('class','telo-kalkulatora')
                      telo_kalkulatora.setAttribute('style', 'display:none;')
                      
                      var minus_dugme = document.createElement('button')
                      minus_dugme.setAttribute('class','decrease')
                      minus_dugme.innerHTML = '-'
                      
                      var kolicina = document.createElement('span')
                      kolicina.setAttribute('class', 'kolicina')
                      kolicina.innerHTML = '0'
                      
                      var plus_dugme = document.createElement('button')
                      plus_dugme.setAttribute('class','increase')
                      plus_dugme.innerHTML = '+'
                      
                      var iznos_popusta = document.createElement('span')
                      iznos_popusta.setAttribute('class', 'popust-artikal')
                      iznos_popusta.setAttribute('style', 'display:none')
                      iznos_popusta.innerHTML = '0'
                      
                      telo_kalkulatora.append(minus_dugme)
                      telo_kalkulatora.append(kolicina)
                      telo_kalkulatora.append(plus_dugme)
                      telo_kalkulatora.append(iznos_popusta)
                      
                      selektor_kalkulatora.append(cekboks)
                      selektor_kalkulatora.append(span_cekboks)
                      // selektor_kalkulatora.append(telo_kalkulatora)
                      kalkulator.append(selektor_kalkulatora)
                      
                      outer_outer_cell.prepend(kalkulator)
                      outer_outer_cell.append(telo_kalkulatora)
                      
                      // KALKULATOR END

                      red++;

                      // PROMO BANERI I MOBILE NEWSLETTER
                      if(counter == 0) {
                        var tabela_row = document.createElement('div') 
                        tabela_row.setAttribute('class', 'proizvodi-row promo-banner')
                        // var row_id = 'promo-banner'
                        // tabela_row.setAttribute('id', row_id)
                        tabela_row.innerHTML = '<div class="proizvodi-cell single-image"><a href="https://maxi.sales-snap.com/uvek-niske-cene" target="_self"><img src="https://maxi.sales-snap.com/asset/1372:kategorijeplava-cenahome-page-minpng3" class="promo-banner" id="il1xl"></a></div>'
                        document.getElementById('tabela-proizvoda').append(tabela_row)
                      } else if(counter == 4) {
                        var tabela_row = document.createElement('div') 
                        tabela_row.setAttribute('class', 'proizvodi-row mobile-newsletter')
                        // var row_id = 'mobile-newsletter'
                        // tabela_row.setAttribute('id', row_id)
                        var njuzleter_wrapper = document.createElement('div')
                        njuzleter_wrapper.setAttribute('class','mobile-newsletter-wrapper')

                        

                        var njuzleter = document.createElement('script')
                        njuzleter.setAttribute('src', 'https://maxi.sales-snap.com/form/generate.js?id=6')

                        njuzleter_wrapper.append(njuzleter)
                        tabela_row.append(njuzleter_wrapper)
                        

                        document.getElementById('tabela-proizvoda').append(tabela_row)
                      } else if(counter == 8) {
                        var tabela_row = document.createElement('div') 
                        tabela_row.setAttribute('class', 'proizvodi-row promo-banner')
                        // var row_id = 'promo-banner'
                        // tabela_row.setAttribute('id', row_id)
                        tabela_row.innerHTML = '<div class="proizvodi-cell single-image"><a href="javascript:void(0)" onclick="getMobileOperatingSystem()"><img src="https://maxi.sales-snap.com/asset/386:shopgo-bannerpng" class="promo-banner" id="il1xl"></a></div>'
                        document.getElementById('tabela-proizvoda').append(tabela_row)
                      }
                    }
                      
                    
                  } else {

                    if(kategorija == '5') {
                      var cell = document.createElement('div')
                      cell.setAttribute('class', 'prozivodi-cell')
                      cell.setAttribute('id', 'cell-' + counter)


                    //   var link = document.createElement('a')
                    //   var homepage = 'https://maxi.sales-snap.com/page/preview/20'
                    //   link.setAttribute('href', homepage)
                    //   link.setAttribute('target', '_self')
                    //   link.setAttribute('id', 'link-' + counter)

                      var razmak = document.createElement('br')

                      var slika = document.createElement('img')
                      slika.setAttribute('src', url)
                      slika.setAttribute('id', 'slika-' + counter)

                    //   link.append(slika)

                      var naziv_1 = document.createElement('div')
                      naziv_1.setAttribute('id', 'naziv-' + counter)
                      naziv_1.setAttribute('class', 'naziv-proizvoda')
                      naziv_1.innerHTML = naziv

                      var stara_cena_1 = document.createElement('div')
                      stara_cena_1.setAttribute('id', 'stara-cena-' + counter)
                      var stara_cena_tekst = stara_cena.split('.')
                      if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                      else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                    //   var nova_cena_1 = document.createElement('div')
                    //   nova_cena_1.setAttribute('id', 'nova-cena-' + counter)
                    //   var nova_cena_tekst = nova_cena.split('.')
                    //   if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                    //   else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                    //   var popust_1 = document.createElement('div')
                    //   popust_1.setAttribute('id', 'popust-' + counter)
                    //   popust_1.innerHTML = popust


                      var inner_cell_1 = document.createElement('div')
                      inner_cell_1.setAttribute('class', 'div-inside')
                      inner_cell_1.append(slika)

                      //   var popust_container = document.createElement('div')
                      //   popust_container.setAttribute('class', 'crveni-krug')
                      //   inner_cell_1.append(naziv_1)
                      //   popust_container.append(popust_1)

                        
                      //   inner_cell_1.append(popust_container)
                        inner_cell_1.append(naziv_1)
                      
                      var inner_cell_2 = document.createElement('div')
                      inner_cell_2.setAttribute('class', 'div-inside')
                      // inner_cell_2.append(naziv_1)

                      var zuti_cenovnik = document.createElement('div')
                      zuti_cenovnik.setAttribute('class', 'zuti-cenovnik plava-cena')

                      var cenovnik_left = document.createElement('div')
                      cenovnik_left.setAttribute('class', 'cenovnik-left')
                      cenovnik_left.append(stara_cena_1)

                      // var cenovnik_right = document.createElement('div')
                      // cenovnik_right.setAttribute('class', 'cenovnik-right')
                      // cenovnik_right.append(stara_cena_1)

                      zuti_cenovnik.append(cenovnik_left)
                      // zuti_cenovnik.append(cenovnik_right)

                      inner_cell_2.append(zuti_cenovnik)


                        var outer_cell = document.createElement('div')
                        outer_cell.setAttribute('class', 'slicica-div')
                        outer_cell.append(inner_cell_1)
                        outer_cell.append(inner_cell_2)
                      //   outer_cell.append(cell)

                      //   tabela_row.append(outer_cell)

                      var outer_outer_cell = document.createElement('div')
                      outer_outer_cell.setAttribute('class', 'spoljni-div')
                      outer_outer_cell.append(outer_cell)

                      // tabela_row.append(outer_outer_cell)


                      var rok = document.createElement('div')
                          rok.setAttribute('class', 'trajanje')
                          if(trajanje != undefined) rok.append(trajanje)
                          outer_outer_cell.append(rok)
                          
                          var lokacija = document.createElement('div')
                          lokacija.setAttribute('class', 'lokacija')
                          if(vazenje != undefined) lokacija.append(vazenje)
                          outer_outer_cell.append(lokacija)
                          
                          // console.log(vazenje)
                          
                      var query = 'proizvodi-row-' + (red - 1)

                        

                        document.getElementById(query).append(outer_outer_cell)


                    } else {
                      var cell = document.createElement('div')
                      cell.setAttribute('class', 'prozivodi-cell')
                      cell.setAttribute('id', 'cell-' + counter)

                      var razmak = document.createElement('br')

                      var slika = document.createElement('img')
                      slika.setAttribute('src', url)
                      slika.setAttribute('id', 'slika-' + counter)

                      var naziv_1 = document.createElement('div')
                      naziv_1.setAttribute('id', 'naziv-' + counter)
                      naziv_1.setAttribute('class', 'naziv-proizvoda')
                      naziv_1.innerHTML = naziv

                      var stara_cena_1 = document.createElement('div')
                      stara_cena_1.setAttribute('id', 'stara-cena-' + counter)
                      stara_cena_1.setAttribute('data-id', stara_cena)
                    
                      var stara_cena_tekst = stara_cena.split('.')
                      if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                      else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                      var nova_cena_1 = document.createElement('div')
                      nova_cena_1.setAttribute('id', 'nova-cena-' + counter)
                              nova_cena_1.setAttribute('data-id', nova_cena)
                      var nova_cena_tekst = nova_cena.split('.')
                      if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                      else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                      var popust_1 = document.createElement('div')
                      popust_1.setAttribute('id', 'popust-' + counter)
                      popust_1.innerHTML = popust


                      var inner_cell_1 = document.createElement('div')
                      inner_cell_1.setAttribute('class', 'div-inside')
                      inner_cell_1.append(slika)

                      var popust_container = document.createElement('div')
                      popust_container.setAttribute('class', 'crveni-krug')
                      inner_cell_1.append(naziv_1)
                      popust_container.append(popust_1)

                      
                      inner_cell_1.append(popust_container)
                      //   inner_cell_1.append(naziv_1)
                      
                      var inner_cell_2 = document.createElement('div')
                      inner_cell_2.setAttribute('class', 'div-inside')
                      // inner_cell_2.append(naziv_1)

                      var zuti_cenovnik = document.createElement('div')
                      zuti_cenovnik.setAttribute('class', 'zuti-cenovnik')

                      var cenovnik_left = document.createElement('div')
                      cenovnik_left.setAttribute('class', 'cenovnik-left')
                      cenovnik_left.append(nova_cena_1)

                      var cenovnik_right = document.createElement('div')
                      cenovnik_right.setAttribute('class', 'cenovnik-right')
                      cenovnik_right.append(stara_cena_1)

                      zuti_cenovnik.append(cenovnik_left)
                      zuti_cenovnik.append(cenovnik_right)

                      inner_cell_2.append(zuti_cenovnik)


                      var outer_cell = document.createElement('div')
                      outer_cell.setAttribute('class', 'slicica-div')
                      outer_cell.append(inner_cell_1)
                      outer_cell.append(inner_cell_2)
                    //   outer_cell.append(cell)

                    //   tabela_row.append(outer_cell)

                      var outer_outer_cell = document.createElement('div')
                      outer_outer_cell.setAttribute('class', 'spoljni-div')
                      outer_outer_cell.append(outer_cell)
                    
                    

                    // tabela_row.append(outer_outer_cell)


                      var rok = document.createElement('div')
                      rok.setAttribute('class', 'trajanje')
                      if(trajanje != undefined) rok.append(trajanje)
                      outer_outer_cell.append(rok)
                        
                      var lokacija = document.createElement('div')
                      lokacija.setAttribute('class', 'lokacija')
                      if(vazenje != undefined) lokacija.append(vazenje)
                      outer_outer_cell.append(lokacija)
                        
                        // console.log(vazenje)
                        
                      var query = 'proizvodi-row-' + (red - 1)

                      document.getElementById(query).append(outer_outer_cell)
                    
                    
                      // KALKULATOR START
                      var kalkulator = document.createElement('div')
                      kalkulator.setAttribute('class', 'kalkulator')
                      
                      
                      var selektor_kalkulatora = document.createElement('div')
                      selektor_kalkulatora.setAttribute('class','selektor-kalkulatora')
                      
                      var cekboks = document.createElement('input')
                      cekboks.setAttribute('class','cekboks-kalkulatora')
                      cekboks.setAttribute('type', 'checkbox')
                      
                      var span_cekboks = document.createElement('span')
                      span_cekboks.setAttribute('class', 'checkmark')
                      
                      var telo_kalkulatora = document.createElement('div')
                      telo_kalkulatora.setAttribute('class','telo-kalkulatora')
                      telo_kalkulatora.setAttribute('style', 'display:none;')
                      
                      var minus_dugme = document.createElement('button')
                      minus_dugme.setAttribute('class','decrease')
                      minus_dugme.innerHTML = '-'
                      
                      var kolicina = document.createElement('span')
                      kolicina.setAttribute('class', 'kolicina')
                      kolicina.innerHTML = '0'
                      
                      var plus_dugme = document.createElement('button')
                      plus_dugme.setAttribute('class','increase')
                      plus_dugme.innerHTML = '+'
                      
                      var iznos_popusta = document.createElement('span')
                      iznos_popusta.setAttribute('class', 'popust-artikal')
                      iznos_popusta.setAttribute('style', 'display:none')
                      iznos_popusta.innerHTML = '0'
                      
                      telo_kalkulatora.append(minus_dugme)
                      telo_kalkulatora.append(kolicina)
                      telo_kalkulatora.append(plus_dugme)
                      telo_kalkulatora.append(iznos_popusta)
                      
                      selektor_kalkulatora.append(cekboks)
                      selektor_kalkulatora.append(span_cekboks)
                      // selektor_kalkulatora.append(telo_kalkulatora)
                      kalkulator.append(selektor_kalkulatora)
                      
                      outer_outer_cell.prepend(kalkulator)
                      outer_outer_cell.append(telo_kalkulatora)
                      
                      // KALKULATOR END
                    }



                  }
                  counter++
                });
              
            }   
            
            async function getDataSidebar() {

                const response = await fetch('tabele/sidebar_artikli.csv', {cache:"no-store"});
                const data = await response.text();
                
                var counter = 1

                const rows = data.split('\n').slice(1)
                
                
                rows.forEach(element => {
                  const row = element.split(';')
                  const url = row[0]
                  const stara_cena = row[1]
                  const nova_cena = row[2]
                  const popust = row[3]
                  const link = row[4]
                  

                  var slika = document.createElement('img')
                  slika.setAttribute('src', url)
                  slika.setAttribute('id', 'slika-' + counter)

                  var stara_cena_1 = document.createElement('div')
                  stara_cena_1.setAttribute('id', 'stara-cena-' + counter)
                  var stara_cena_tekst = stara_cena.split('.')
                      
                  if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                    else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                  var nova_cena_1 = document.createElement('div')
                  nova_cena_1.setAttribute('id', 'nova-cena-' + counter)
                  var nova_cena_tekst = nova_cena.split('.')
                  
                  if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                    else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                  var popust_1 = document.createElement('div')
                  popust_1.setAttribute('id', 'popust-' + counter)
                  popust_1.innerHTML = popust

                  var popust_container = document.createElement('div')
                  popust_container.setAttribute('class', 'crveni-krug')
                    //   inner_cell_1.append(naziv_1)
                  popust_container.append(popust_1)


                  var zuti_cenovnik = document.createElement('div')
                  zuti_cenovnik.setAttribute('class', 'zuti-cenovnik')

                  var cenovnik_left = document.createElement('div')
                  cenovnik_left.setAttribute('class', 'cenovnik-left')
                  cenovnik_left.append(nova_cena_1)

                  var cenovnik_right = document.createElement('div')
                  cenovnik_right.setAttribute('class', 'cenovnik-right')
                  cenovnik_right.append(stara_cena_1)

                  zuti_cenovnik.append(cenovnik_left)
                  zuti_cenovnik.append(cenovnik_right)

                  var outer_outer_cell = document.createElement('div')
                  outer_outer_cell.setAttribute('class', 'spoljni-div')
                  outer_outer_cell.append(slika)
                  outer_outer_cell.append(popust_container)
                  outer_outer_cell.append(zuti_cenovnik)
                    
                  var query = 'sidebar_proizvod_' + counter
                    
                  if(link != undefined) {

                    var link_wrapper = document.createElement('a')
                    link_wrapper.setAttribute('href', link)
                    link_wrapper.setAttribute('target', '_self')
                    link_wrapper.append(outer_outer_cell)
                    document.getElementById(query).append(link_wrapper)

                  } else document.getElementById(query).append(outer_outer_cell)
                    
                  counter++

                });
            }

            async function getDataSortPrice() {
                const response = await fetch('tabele/pocetna.csv', {cache:"no-store"});
                // const response = await fetch('https://maxi.sales-snap.com/asset/194:nazivi-i-cene-artikala-za-digital-lifletcsv');
                const data = await response.text();
                
                const name_row = data.split('\n')

                const rows = data.split('\n').slice(1)


                let rows_copy = [...rows]

                let new_row = [rows_copy[0]]

                for(var x = 1; x < rows_copy.length; x++) {
                  let current_price = parseInt(rows_copy[x].split(';')[3])

                  if(current_price < parseInt(new_row[x-1].split(';')[3])) {
                    if(x - 1 == 0) {
                      let temp = new_row[x-1]
                      new_row[x-1] = rows_copy[x]
                      new_row[x] = temp
                    } else {
                      var y = x - 2
                      if(current_price > parseInt(new_row[y].split(';')[3])) {
                        let temp = new_row[y + 1]
                        new_row[y + 1] = rows_copy[x]
                        new_row[x] = temp
                      } else {
                        
                        while(y > -1 && current_price < parseInt(new_row[y].split(';')[3])) {
                          y--
                        }

                        if(y == -1) {
                          new_row.splice(0,0,rows_copy[x])
                        }else new_row.splice(y+1,0,rows_copy[x])
                      }
                      
                    }

                    
                  } else {
                    new_row.push(rows_copy[x])
                  } 

                }




                var counter = 0;

                var red = 0;
                

                new_row.forEach(element => {
                    const row = element.split(';')
                    const kategorija = row[0]
                    const naziv = row[1]
                    const stara_cena = row[2]
                    const nova_cena = row[3]
                    const popust = row[4]
                    const url = row[5]
                    const trajanje = row[6]
                    const vazenje = row[7]                  

                    if(counter % 4 == 0 || counter == 0) {

                      if(kategorija == '5') {
                        
                        var tabela_row = document.createElement('div') 
                        tabela_row.setAttribute('class', 'proizvodi-row')
                        var row_id = 'proizvodi-row-cena-' + red
                        tabela_row.setAttribute('id', row_id)
                        // '<div class="proizvodi-row" id="proizvodi-row-' + counter + '"</div>'
                          //  console.log(tabela_row)
                        document.getElementById('tabela-proizvoda-cena').append(tabela_row)

                        var cell = document.createElement('div')
                        cell.setAttribute('class', 'prozivodi-cell')
                        cell.setAttribute('id', 'cell-cena' + counter)

                      //   var link = document.createElement('a')
                      //   var homepage = 'https://maxi.sales-snap.com/page/preview/20'
                      //   link.setAttribute('href', homepage)
                      //   link.setAttribute('target', '_self')
                      //   link.setAttribute('id', 'link-' + counter)

                        var razmak = document.createElement('br')

                        var slika = document.createElement('img')
                        slika.setAttribute('src', url)
                        slika.setAttribute('id', 'slika-cena' + counter)

                      //   link.append(slika)

                        var naziv_1 = document.createElement('div')
                        naziv_1.setAttribute('id', 'naziv-cena' + counter)
                        naziv_1.setAttribute('class', 'naziv-proizvoda')
                        
                        naziv_1.innerHTML = naziv

                        var stara_cena_1 = document.createElement('div')
                        stara_cena_1.setAttribute('id', 'stara-cena-cena' + counter)
                        var stara_cena_tekst = stara_cena.split('.')
                        
                        if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                        else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                      //   var nova_cena_1 = document.createElement('div')
                      //   nova_cena_1.setAttribute('id', 'nova-cena-' + counter)
                      //   var nova_cena_tekst = nova_cena.split('.')
                      //   if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                      //   else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                      //   var popust_1 = document.createElement('div')
                      //   popust_1.setAttribute('id', 'popust-' + counter)
                      //   popust_1.innerHTML = popust


                      //   cell.append(link)
                      //   cell.append(naziv_1)
                      //   cell.append(stara_cena_1)
                      //   cell.append(nova_cena_1)
                      //   cell.append(popust_1)

                        var inner_cell_1 = document.createElement('div')
                        inner_cell_1.setAttribute('class', 'div-inside')
                        inner_cell_1.append(slika)

                      //   var popust_container = document.createElement('div')
                      //   popust_container.setAttribute('class', 'crveni-krug')
                        inner_cell_1.append(naziv_1)
                      //   popust_container.append(popust_1)

                        
                      //   inner_cell_1.append(popust_container)

                      
                      var inner_cell_2 = document.createElement('div')
                      inner_cell_2.setAttribute('class', 'div-inside')
                      // inner_cell_2.append(naziv_1)

                      var zuti_cenovnik = document.createElement('div')
                      zuti_cenovnik.setAttribute('class', 'zuti-cenovnik plava-cena')

                      var cenovnik_left = document.createElement('div')
                      cenovnik_left.setAttribute('class', 'cenovnik-left')
                      cenovnik_left.append(stara_cena_1)

                      // var cenovnik_right = document.createElement('div')
                      // cenovnik_right.setAttribute('class', 'cenovnik-right')
                      // cenovnik_right.append(stara_cena_1)

                      zuti_cenovnik.append(cenovnik_left)
                      // zuti_cenovnik.append(cenovnik_right)

                      inner_cell_2.append(zuti_cenovnik)


                        var outer_cell = document.createElement('div')
                        outer_cell.setAttribute('class', 'slicica-div')
                        outer_cell.append(inner_cell_1)
                        outer_cell.append(inner_cell_2)
                      //   outer_cell.append(cell)

                      var outer_outer_cell = document.createElement('div')
                      outer_outer_cell.setAttribute('class', 'spoljni-div')
                      outer_outer_cell.append(outer_cell)


                      
                          var rok = document.createElement('div')
                          rok.setAttribute('class', 'trajanje')
                          if(trajanje != undefined) rok.append(trajanje)
                          outer_outer_cell.append(rok)
                          
                          var lokacija = document.createElement('div')
                          lokacija.setAttribute('class', 'lokacija')
                          if(vazenje != undefined) lokacija.append(vazenje)
                          outer_outer_cell.append(lokacija)
                      // console.log(vazenje)

                      tabela_row.append(outer_outer_cell)

                        red++;

                      } else {

                        var tabela_row = document.createElement('div') 
                        tabela_row.setAttribute('class', 'proizvodi-row')
                        var row_id = 'proizvodi-row-cena-' + red
                        tabela_row.setAttribute('id', row_id)
                        // '<div class="proizvodi-row" id="proizvodi-row-' + counter + '"</div>'
                          //  console.log(tabela_row)
                        document.getElementById('tabela-proizvoda-cena').append(tabela_row)

                        var cell = document.createElement('div')
                        cell.setAttribute('class', 'prozivodi-cell')
                        cell.setAttribute('id', 'cell-cena-' + counter)

                        var razmak = document.createElement('br')

                        var slika = document.createElement('img')
                        slika.setAttribute('src', url)
                        slika.setAttribute('id', 'slika-cena-' + counter)

                        var naziv_1 = document.createElement('div')
                        naziv_1.setAttribute('id', 'naziv-cena-' + counter)
                        naziv_1.setAttribute('class', 'naziv-proizvoda')

                        naziv_1.innerHTML = naziv

                        var stara_cena_1 = document.createElement('div')
                        stara_cena_1.setAttribute('id', 'stara-cena-cena-' + counter)
                        stara_cena_1.setAttribute('data-id', stara_cena)
                        var stara_cena_tekst = stara_cena.split('.')
                        
                        if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                          else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                        var nova_cena_1 = document.createElement('div')
                        nova_cena_1.setAttribute('id', 'nova-cena-cena-' + counter)
                        nova_cena_1.setAttribute('data-id', nova_cena)
                        var nova_cena_tekst = nova_cena.split('.')
                        
                        if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                          else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                        var popust_1 = document.createElement('div')
                        popust_1.setAttribute('id', 'popust-cena-' + counter)
                        popust_1.innerHTML = popust

                        var inner_cell_1 = document.createElement('div')
                        inner_cell_1.setAttribute('class', 'div-inside')
                        inner_cell_1.append(slika)

                        var popust_container = document.createElement('div')
                        popust_container.setAttribute('class', 'crveni-krug')
                        inner_cell_1.append(naziv_1)
                        popust_container.append(popust_1)

                        
                        inner_cell_1.append(popust_container)

                      
                        var inner_cell_2 = document.createElement('div')
                        inner_cell_2.setAttribute('class', 'div-inside')
                        // inner_cell_2.append(naziv_1)

                        var zuti_cenovnik = document.createElement('div')
                        zuti_cenovnik.setAttribute('class', 'zuti-cenovnik')

                        var cenovnik_left = document.createElement('div')
                        cenovnik_left.setAttribute('class', 'cenovnik-left')
                        cenovnik_left.append(nova_cena_1)

                        var cenovnik_right = document.createElement('div')
                        cenovnik_right.setAttribute('class', 'cenovnik-right')
                        cenovnik_right.append(stara_cena_1)

                        zuti_cenovnik.append(cenovnik_left)
                        zuti_cenovnik.append(cenovnik_right)

                        inner_cell_2.append(zuti_cenovnik)


                        var outer_cell = document.createElement('div')
                        outer_cell.setAttribute('class', 'slicica-div')
                        outer_cell.append(inner_cell_1)
                        outer_cell.append(inner_cell_2)
                      //   outer_cell.append(cell)

                        var outer_outer_cell = document.createElement('div')
                        outer_outer_cell.setAttribute('class', 'spoljni-div')
                        outer_outer_cell.append(outer_cell)

                  
                
                      
                        var rok = document.createElement('div')
                        rok.setAttribute('class', 'trajanje')
                        if(trajanje != undefined) rok.append(trajanje)
                        outer_outer_cell.append(rok)
                          
                        var lokacija = document.createElement('div')
                        lokacija.setAttribute('class', 'lokacija')
                        if(vazenje != undefined) lokacija.append(vazenje)
                        outer_outer_cell.append(lokacija)
                      // console.log(vazenje)

                        tabela_row.append(outer_outer_cell)

                        // KALKULATOR START
                        var kalkulator = document.createElement('div')
                        kalkulator.setAttribute('class', 'kalkulator')
                      
                      
                        var selektor_kalkulatora = document.createElement('div')
                        selektor_kalkulatora.setAttribute('class','selektor-kalkulatora')
                        
                        var cekboks = document.createElement('input')
                        cekboks.setAttribute('class','cekboks-kalkulatora')
                        cekboks.setAttribute('type', 'checkbox')
                        
                        var span_cekboks = document.createElement('span')
                        span_cekboks.setAttribute('class', 'checkmark')
                        
                        var telo_kalkulatora = document.createElement('div')
                        telo_kalkulatora.setAttribute('class','telo-kalkulatora')
                        telo_kalkulatora.setAttribute('style', 'display:none;')
                        
                        var minus_dugme = document.createElement('button')
                        minus_dugme.setAttribute('class','decrease')
                        minus_dugme.innerHTML = '-'
                        
                        var kolicina = document.createElement('span')
                        kolicina.setAttribute('class', 'kolicina')
                        kolicina.innerHTML = '0'
                        
                        var plus_dugme = document.createElement('button')
                        plus_dugme.setAttribute('class','increase')
                        plus_dugme.innerHTML = '+'
                        
                        var iznos_popusta = document.createElement('span')
                        iznos_popusta.setAttribute('class', 'popust-artikal')
                        iznos_popusta.setAttribute('style', 'display:none')
                        iznos_popusta.innerHTML = '0'
                        
                        telo_kalkulatora.append(minus_dugme)
                        telo_kalkulatora.append(kolicina)
                        telo_kalkulatora.append(plus_dugme)
                        telo_kalkulatora.append(iznos_popusta)
                        
                        selektor_kalkulatora.append(cekboks)
                        selektor_kalkulatora.append(span_cekboks)
                        // selektor_kalkulatora.append(telo_kalkulatora)
                        kalkulator.append(selektor_kalkulatora)
                      
                        outer_outer_cell.prepend(kalkulator)
                        outer_outer_cell.append(telo_kalkulatora)
                      
                        // KALKULATOR END


                        red++;

                        if(counter == 0) {

                          var tabela_row = document.createElement('div') 
                          tabela_row.setAttribute('class', 'proizvodi-row promo-banner')
                          // var row_id = 'promo-banner-cena'
                          // tabela_row.setAttribute('id', row_id)
                          tabela_row.innerHTML = '<div class="proizvodi-cell single-image"><a href="https://maxi.sales-snap.com/uvek-niske-cene" target="_self"><img src="https://maxi.sales-snap.com/asset/1372:kategorijeplava-cenahome-page-minpng3" class="promo-banner" id="il1xl"></a></div>'
                          document.getElementById('tabela-proizvoda-cena').append(tabela_row)

                        } else if(counter == 4) {

                          var tabela_row = document.createElement('div') 
                          tabela_row.setAttribute('class', 'proizvodi-row mobile-newsletter')
                          // var row_id = 'mobile-newsletter-cena'
                          // tabela_row.setAttribute('id', row_id)
                          // var njuzleter = document.createElement('script')
                          // njuzleter.setAttribute('src', 'https://maxi.sales-snap.com/form/generate.js?id=6')
                          // tabela_row.append(njuzleter)

                          document.getElementById('tabela-proizvoda-cena').append(tabela_row)

                        } else if(counter == 8) {

                          var tabela_row = document.createElement('div') 
                          tabela_row.setAttribute('class', 'proizvodi-row promo-banner')
                          // var row_id = 'promo-banner'
                          // tabela_row.setAttribute('id', row_id)
                          tabela_row.innerHTML = '<div class="proizvodi-cell single-image"><a href="javascript:void(0)" onclick="getMobileOperatingSystem()"><img src="https://maxi.sales-snap.com/asset/386:shopgo-bannerpng" class="promo-banner" id="il1xl"></a></div>'
                          document.getElementById('tabela-proizvoda-cena').append(tabela_row)

                        }
                      }

                     
                    
                  } else {

                    if(kategorija == '5') {
                      
                      var cell = document.createElement('div')
                      cell.setAttribute('class', 'prozivodi-cell')
                      cell.setAttribute('id', 'cell-cena' + counter)


                    //   var link = document.createElement('a')
                    //   var homepage = 'https://maxi.sales-snap.com/page/preview/20'
                    //   link.setAttribute('href', homepage)
                    //   link.setAttribute('target', '_self')
                    //   link.setAttribute('id', 'link-' + counter)

                      var razmak = document.createElement('br')

                      var slika = document.createElement('img')
                      slika.setAttribute('src', url)
                      slika.setAttribute('id', 'slika-cena' + counter)

                    //   link.append(slika)

                      var naziv_1 = document.createElement('div')
                      naziv_1.setAttribute('id', 'naziv-cena' + counter)
                      naziv_1.setAttribute('class', 'naziv-proizvoda')
                      naziv_1.innerHTML = naziv

                      var stara_cena_1 = document.createElement('div')
                      stara_cena_1.setAttribute('id', 'stara-cena-cena' + counter)
                      var stara_cena_tekst = stara_cena.split('.')
                      if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                      else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                    //   var nova_cena_1 = document.createElement('div')
                    //   nova_cena_1.setAttribute('id', 'nova-cena-' + counter)
                    //   var nova_cena_tekst = nova_cena.split('.')
                    //   if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                    //   else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                    //   var popust_1 = document.createElement('div')
                    //   popust_1.setAttribute('id', 'popust-' + counter)
                    //   popust_1.innerHTML = popust


                      var inner_cell_1 = document.createElement('div')
                      inner_cell_1.setAttribute('class', 'div-inside')
                      inner_cell_1.append(slika)

                      //   var popust_container = document.createElement('div')
                      //   popust_container.setAttribute('class', 'crveni-krug')
                      //   inner_cell_1.append(naziv_1)
                      //   popust_container.append(popust_1)

                        
                      //   inner_cell_1.append(popust_container)
                        inner_cell_1.append(naziv_1)
                      
                      var inner_cell_2 = document.createElement('div')
                      inner_cell_2.setAttribute('class', 'div-inside')
                      // inner_cell_2.append(naziv_1)

                      var zuti_cenovnik = document.createElement('div')
                      zuti_cenovnik.setAttribute('class', 'zuti-cenovnik plava-cena')

                      var cenovnik_left = document.createElement('div')
                      cenovnik_left.setAttribute('class', 'cenovnik-left')
                      cenovnik_left.append(stara_cena_1)

                      // var cenovnik_right = document.createElement('div')
                      // cenovnik_right.setAttribute('class', 'cenovnik-right')
                      // cenovnik_right.append(stara_cena_1)

                      zuti_cenovnik.append(cenovnik_left)
                      // zuti_cenovnik.append(cenovnik_right)

                      inner_cell_2.append(zuti_cenovnik)


                        var outer_cell = document.createElement('div')
                        outer_cell.setAttribute('class', 'slicica-div')
                        outer_cell.append(inner_cell_1)
                        outer_cell.append(inner_cell_2)
                      //   outer_cell.append(cell)

                      //   tabela_row.append(outer_cell)

                      var outer_outer_cell = document.createElement('div')
                      outer_outer_cell.setAttribute('class', 'spoljni-div')
                      outer_outer_cell.append(outer_cell)

                      // tabela_row.append(outer_outer_cell)


                      var rok = document.createElement('div')
                          rok.setAttribute('class', 'trajanje')
                          if(trajanje != undefined) rok.append(trajanje)
                          outer_outer_cell.append(rok)
                          
                          var lokacija = document.createElement('div')
                          lokacija.setAttribute('class', 'lokacija')
                          if(vazenje != undefined) lokacija.append(vazenje)
                          outer_outer_cell.append(lokacija)
                          
                          // console.log(vazenje)
                          
                      var query = 'proizvodi-row-cena-' + (red - 1)

                        

                      document.getElementById(query).append(outer_outer_cell)


                    } else {


                      var cell = document.createElement('div')
                      cell.setAttribute('class', 'prozivodi-cell')
                      cell.setAttribute('id', 'cell-cena-' + counter)

                      var razmak = document.createElement('br')

                      var slika = document.createElement('img')
                      slika.setAttribute('src', url)
                      slika.setAttribute('id', 'slika-cena-' + counter)

                    //   link.append(slika)

                      var naziv_1 = document.createElement('div')
                      naziv_1.setAttribute('id', 'naziv-cena-' + counter)
                      naziv_1.setAttribute('class', 'naziv-proizvoda')
                      naziv_1.innerHTML = naziv

                      var stara_cena_1 = document.createElement('div')
                      stara_cena_1.setAttribute('id', 'stara-cena-cena-' + counter)
                      stara_cena_1.setAttribute('data-id', stara_cena)
                    
                      var stara_cena_tekst = stara_cena.split('.')
                      if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                        else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                      var nova_cena_1 = document.createElement('div')
                      nova_cena_1.setAttribute('id', 'nova-cena-cena-' + counter)
                      nova_cena_1.setAttribute('data-id', nova_cena)
                      var nova_cena_tekst = nova_cena.split('.')
                      
                      if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                        else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                      var popust_1 = document.createElement('div')
                      popust_1.setAttribute('id', 'popust-cena-' + counter)
                      popust_1.innerHTML = popust


                      var inner_cell_1 = document.createElement('div')
                      inner_cell_1.setAttribute('class', 'div-inside')
                      inner_cell_1.append(slika)

                      var popust_container = document.createElement('div')
                      popust_container.setAttribute('class', 'crveni-krug')
                      inner_cell_1.append(naziv_1)
                      popust_container.append(popust_1)

                      
                      inner_cell_1.append(popust_container)
                    //   inner_cell_1.append(naziv_1)
                    
                      var inner_cell_2 = document.createElement('div')
                      inner_cell_2.setAttribute('class', 'div-inside')
                      // inner_cell_2.append(naziv_1)

                      var zuti_cenovnik = document.createElement('div')
                      zuti_cenovnik.setAttribute('class', 'zuti-cenovnik')

                      var cenovnik_left = document.createElement('div')
                      cenovnik_left.setAttribute('class', 'cenovnik-left')
                      cenovnik_left.append(nova_cena_1)

                      var cenovnik_right = document.createElement('div')
                      cenovnik_right.setAttribute('class', 'cenovnik-right')
                      cenovnik_right.append(stara_cena_1)

                      zuti_cenovnik.append(cenovnik_left)
                      zuti_cenovnik.append(cenovnik_right)

                      inner_cell_2.append(zuti_cenovnik)


                      var outer_cell = document.createElement('div')
                      outer_cell.setAttribute('class', 'slicica-div')
                      outer_cell.append(inner_cell_1)
                      outer_cell.append(inner_cell_2)
                    //   outer_cell.append(cell)

                    //   tabela_row.append(outer_cell)

                      var outer_outer_cell = document.createElement('div')
                      outer_outer_cell.setAttribute('class', 'spoljni-div')
                      outer_outer_cell.append(outer_cell)
                    
                    

                    // tabela_row.append(outer_outer_cell)


                      var rok = document.createElement('div')
                      rok.setAttribute('class', 'trajanje')
                      
                      if(trajanje != undefined) rok.append(trajanje)
                      outer_outer_cell.append(rok)
                        
                      var lokacija = document.createElement('div')
                      lokacija.setAttribute('class', 'lokacija')
                      
                      if(vazenje != undefined) lokacija.append(vazenje)
                      outer_outer_cell.append(lokacija)
                        
                        // console.log(vazenje)
                        
                      var query = 'proizvodi-row-cena-' + (red - 1)

                      

                      document.getElementById(query).append(outer_outer_cell)

                      // KALKULATOR START
                      var kalkulator = document.createElement('div')
                      kalkulator.setAttribute('class', 'kalkulator')
                      
                      
                      var selektor_kalkulatora = document.createElement('div')
                      selektor_kalkulatora.setAttribute('class','selektor-kalkulatora')
                      
                      var cekboks = document.createElement('input')
                      cekboks.setAttribute('class','cekboks-kalkulatora')
                      cekboks.setAttribute('type', 'checkbox')
                      
                      var span_cekboks = document.createElement('span')
                      span_cekboks.setAttribute('class', 'checkmark')
                      
                      var telo_kalkulatora = document.createElement('div')
                      telo_kalkulatora.setAttribute('class','telo-kalkulatora')
                      telo_kalkulatora.setAttribute('style', 'display:none;')
                      
                      var minus_dugme = document.createElement('button')
                      minus_dugme.setAttribute('class','decrease')
                      minus_dugme.innerHTML = '-'
                      
                      var kolicina = document.createElement('span')
                      kolicina.setAttribute('class', 'kolicina')
                      kolicina.innerHTML = '0'
                      
                      var plus_dugme = document.createElement('button')
                      plus_dugme.setAttribute('class','increase')
                      plus_dugme.innerHTML = '+'
                      
                      var iznos_popusta = document.createElement('span')
                      iznos_popusta.setAttribute('class', 'popust-artikal')
                      iznos_popusta.setAttribute('style', 'display:none')
                      iznos_popusta.innerHTML = '0'
                      
                      telo_kalkulatora.append(minus_dugme)
                      telo_kalkulatora.append(kolicina)
                      telo_kalkulatora.append(plus_dugme)
                      telo_kalkulatora.append(iznos_popusta)
                    
                      selektor_kalkulatora.append(cekboks)
                      selektor_kalkulatora.append(span_cekboks)
                      // selektor_kalkulatora.append(telo_kalkulatora)
                      kalkulator.append(selektor_kalkulatora)

                      outer_outer_cell.prepend(kalkulator)
                      outer_outer_cell.append(telo_kalkulatora)
                    
                    // KALKULATOR END
                    }

                      

                  }
                  counter++
                });

            }   


            async function getDataSortDiscount() {
                const response = await fetch('tabele/pocetna.csv', {cache:"no-store"});
                // const response = await fetch('https://maxi.sales-snap.com/asset/194:nazivi-i-cene-artikala-za-digital-lifletcsv');
                const data = await response.text();
                
                const name_row = data.split('\n')

                const rows = data.split('\n').slice(1)


                let rows_copy = [...rows]

                let new_row = [rows_copy[0]]

                for(var x = 1; x < rows_copy.length; x++) {
                  let current_price = parseInt(rows_copy[x].split(';')[4])


                  if(current_price < parseInt(new_row[x-1].split(';')[4])) {
                    if(x - 1 == 0) {
                      let temp = new_row[x-1]
                      new_row[x-1] = rows_copy[x]
                      new_row[x] = temp
                    } else {
                      var y = x - 2
                      if(current_price > parseInt(new_row[y].split(';')[4])) {
                        let temp = new_row[y + 1]
                        new_row[y + 1] = rows_copy[x]
                        new_row[x] = temp
                      } else {
                        
                        while(y > -1 && current_price < parseInt(new_row[y].split(';')[4])) {

                          y--
                        }

                        if(y == -1) {
                          new_row.splice(0,0,rows_copy[x])
                        }else new_row.splice(y+1,0,rows_copy[x])
                      }

                      
                    }

                    
                  } else {
                    new_row.push(rows_copy[x])
                  } 


                }


                var counter = 0;

                var red = 0;
                
                var reversed_array = new_row.reverse()

                reversed_array.forEach(element => {
                    const row = element.split(';')
                    const kategorija = row[0]
                    const naziv = row[1]
                    const stara_cena = row[2]
                    const nova_cena = row[3]
                    const popust = row[4]
                    const url = row[5]
                    const trajanje = row[6]
                    const vazenje = row[7]
                  

                    if(counter % 4 == 0 || counter == 0) {

                      if(kategorija == '5') {
                        
                        var tabela_row = document.createElement('div') 
                        tabela_row.setAttribute('class', 'proizvodi-row')
                        var row_id = 'proizvodi-row-popust-' + red
                        tabela_row.setAttribute('id', row_id)
                        // '<div class="proizvodi-row" id="proizvodi-row-' + counter + '"</div>'
                          //  console.log(tabela_row)
                        document.getElementById('tabela-proizvoda-popust').append(tabela_row)

                        var cell = document.createElement('div')
                        cell.setAttribute('class', 'prozivodi-cell')
                        cell.setAttribute('id', 'cell-popust' + counter)

                      //   var link = document.createElement('a')
                      //   var homepage = 'https://maxi.sales-snap.com/page/preview/20'
                      //   link.setAttribute('href', homepage)
                      //   link.setAttribute('target', '_self')
                      //   link.setAttribute('id', 'link-' + counter)

                        var razmak = document.createElement('br')

                        var slika = document.createElement('img')
                        slika.setAttribute('src', url)
                        slika.setAttribute('id', 'slika-popust' + counter)

                      //   link.append(slika)

                        var naziv_1 = document.createElement('div')
                        naziv_1.setAttribute('id', 'naziv-popust' + counter)
                        naziv_1.setAttribute('class', 'naziv-proizvoda')
                        
                        naziv_1.innerHTML = naziv

                        var stara_cena_1 = document.createElement('div')
                        stara_cena_1.setAttribute('id', 'stara-cena-popust' + counter)
                        var stara_cena_tekst = stara_cena.split('.')
                        
                        if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                        else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                      //   var nova_cena_1 = document.createElement('div')
                      //   nova_cena_1.setAttribute('id', 'nova-cena-' + counter)
                      //   var nova_cena_tekst = nova_cena.split('.')
                      //   if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                      //   else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                      //   var popust_1 = document.createElement('div')
                      //   popust_1.setAttribute('id', 'popust-' + counter)
                      //   popust_1.innerHTML = popust


                      //   cell.append(link)
                      //   cell.append(naziv_1)
                      //   cell.append(stara_cena_1)
                      //   cell.append(nova_cena_1)
                      //   cell.append(popust_1)

                        var inner_cell_1 = document.createElement('div')
                        inner_cell_1.setAttribute('class', 'div-inside')
                        inner_cell_1.append(slika)

                      //   var popust_container = document.createElement('div')
                      //   popust_container.setAttribute('class', 'crveni-krug')
                        inner_cell_1.append(naziv_1)
                      //   popust_container.append(popust_1)

                        
                      //   inner_cell_1.append(popust_container)


                      var inner_cell_2 = document.createElement('div')
                      inner_cell_2.setAttribute('class', 'div-inside')
                      // inner_cell_2.append(naziv_1)

                      var zuti_cenovnik = document.createElement('div')
                      zuti_cenovnik.setAttribute('class', 'zuti-cenovnik plava-cena')

                      var cenovnik_left = document.createElement('div')
                      cenovnik_left.setAttribute('class', 'cenovnik-left')
                      cenovnik_left.append(stara_cena_1)

                      // var cenovnik_right = document.createElement('div')
                      // cenovnik_right.setAttribute('class', 'cenovnik-right')
                      // cenovnik_right.append(stara_cena_1)

                      zuti_cenovnik.append(cenovnik_left)
                      // zuti_cenovnik.append(cenovnik_right)

                      inner_cell_2.append(zuti_cenovnik)


                        var outer_cell = document.createElement('div')
                        outer_cell.setAttribute('class', 'slicica-div')
                        outer_cell.append(inner_cell_1)
                        outer_cell.append(inner_cell_2)
                      //   outer_cell.append(cell)

                      var outer_outer_cell = document.createElement('div')
                      outer_outer_cell.setAttribute('class', 'spoljni-div')
                      outer_outer_cell.append(outer_cell)



                          var rok = document.createElement('div')
                          rok.setAttribute('class', 'trajanje')
                          if(trajanje != undefined) rok.append(trajanje)
                          outer_outer_cell.append(rok)
                          
                          var lokacija = document.createElement('div')
                          lokacija.setAttribute('class', 'lokacija')
                          if(vazenje != undefined) lokacija.append(vazenje)
                          outer_outer_cell.append(lokacija)
                      // console.log(vazenje)

                      tabela_row.append(outer_outer_cell)

                        red++;

                      } else {

                        var tabela_row = document.createElement('div') 
                        tabela_row.setAttribute('class', 'proizvodi-row')
                        var row_id = 'proizvodi-row-popust-' + red
                        tabela_row.setAttribute('id', row_id)
                        // '<div class="proizvodi-row" id="proizvodi-row-' + counter + '"</div>'
                          //  console.log(tabela_row)
                        document.getElementById('tabela-proizvoda-popust').append(tabela_row)

                        var cell = document.createElement('div')
                        cell.setAttribute('class', 'prozivodi-cell')
                        cell.setAttribute('id', 'cell-popust-' + counter)

                        var razmak = document.createElement('br')

                        var slika = document.createElement('img')
                        slika.setAttribute('src', url)
                        slika.setAttribute('id', 'slika-popust-' + counter)

                        var naziv_1 = document.createElement('div')
                        naziv_1.setAttribute('id', 'naziv-popust-' + counter)
                        naziv_1.setAttribute('class', 'naziv-proizvoda')

                        naziv_1.innerHTML = naziv

                        var stara_cena_1 = document.createElement('div')
                        stara_cena_1.setAttribute('id', 'stara-cena-popust-' + counter)
                        stara_cena_1.setAttribute('data-id', stara_cena)
                        var stara_cena_tekst = stara_cena.split('.')
                        
                        if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                          else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                        var nova_cena_1 = document.createElement('div')
                        nova_cena_1.setAttribute('id', 'nova-cena-popust-' + counter)
                        nova_cena_1.setAttribute('data-id', nova_cena)
                        var nova_cena_tekst = nova_cena.split('.')
                        
                        if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                          else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                        var popust_1 = document.createElement('div')
                        popust_1.setAttribute('id', 'popust-popust-' + counter)
                        popust_1.innerHTML = popust

                        var inner_cell_1 = document.createElement('div')
                        inner_cell_1.setAttribute('class', 'div-inside')
                        inner_cell_1.append(slika)

                        var popust_container = document.createElement('div')
                        popust_container.setAttribute('class', 'crveni-krug')
                        inner_cell_1.append(naziv_1)
                        popust_container.append(popust_1)

                        
                        inner_cell_1.append(popust_container)


                        var inner_cell_2 = document.createElement('div')
                        inner_cell_2.setAttribute('class', 'div-inside')
                        // inner_cell_2.append(naziv_1)

                        var zuti_cenovnik = document.createElement('div')
                        zuti_cenovnik.setAttribute('class', 'zuti-cenovnik')

                        var cenovnik_left = document.createElement('div')
                        cenovnik_left.setAttribute('class', 'cenovnik-left')
                        cenovnik_left.append(nova_cena_1)

                        var cenovnik_right = document.createElement('div')
                        cenovnik_right.setAttribute('class', 'cenovnik-right')
                        cenovnik_right.append(stara_cena_1)

                        zuti_cenovnik.append(cenovnik_left)
                        zuti_cenovnik.append(cenovnik_right)

                        inner_cell_2.append(zuti_cenovnik)


                        var outer_cell = document.createElement('div')
                        outer_cell.setAttribute('class', 'slicica-div')
                        outer_cell.append(inner_cell_1)
                        outer_cell.append(inner_cell_2)
                      //   outer_cell.append(cell)

                        var outer_outer_cell = document.createElement('div')
                        outer_outer_cell.setAttribute('class', 'spoljni-div')
                        outer_outer_cell.append(outer_cell)




                        var rok = document.createElement('div')
                        rok.setAttribute('class', 'trajanje')
                        if(trajanje != undefined) rok.append(trajanje)
                        outer_outer_cell.append(rok)
                          
                        var lokacija = document.createElement('div')
                        lokacija.setAttribute('class', 'lokacija')
                        if(vazenje != undefined) lokacija.append(vazenje)
                        outer_outer_cell.append(lokacija)
                      // console.log(vazenje)

                        tabela_row.append(outer_outer_cell)

                        // KALKULATOR START
                        var kalkulator = document.createElement('div')
                        kalkulator.setAttribute('class', 'kalkulator')


                        var selektor_kalkulatora = document.createElement('div')
                        selektor_kalkulatora.setAttribute('class','selektor-kalkulatora')
                        
                        var cekboks = document.createElement('input')
                        cekboks.setAttribute('class','cekboks-kalkulatora')
                        cekboks.setAttribute('type', 'checkbox')
                        
                        var span_cekboks = document.createElement('span')
                        span_cekboks.setAttribute('class', 'checkmark')
                        
                        var telo_kalkulatora = document.createElement('div')
                        telo_kalkulatora.setAttribute('class','telo-kalkulatora')
                        telo_kalkulatora.setAttribute('style', 'display:none;')
                        
                        var minus_dugme = document.createElement('button')
                        minus_dugme.setAttribute('class','decrease')
                        minus_dugme.innerHTML = '-'
                        
                        var kolicina = document.createElement('span')
                        kolicina.setAttribute('class', 'kolicina')
                        kolicina.innerHTML = '0'
                        
                        var plus_dugme = document.createElement('button')
                        plus_dugme.setAttribute('class','increase')
                        plus_dugme.innerHTML = '+'
                        
                        var iznos_popusta = document.createElement('span')
                        iznos_popusta.setAttribute('class', 'popust-artikal')
                        iznos_popusta.setAttribute('style', 'display:none')
                        iznos_popusta.innerHTML = '0'
                        
                        telo_kalkulatora.append(minus_dugme)
                        telo_kalkulatora.append(kolicina)
                        telo_kalkulatora.append(plus_dugme)
                        telo_kalkulatora.append(iznos_popusta)
                        
                        selektor_kalkulatora.append(cekboks)
                        selektor_kalkulatora.append(span_cekboks)
                        // selektor_kalkulatora.append(telo_kalkulatora)
                        kalkulator.append(selektor_kalkulatora)

                        outer_outer_cell.prepend(kalkulator)
                        outer_outer_cell.append(telo_kalkulatora)

                        // KALKULATOR END


                        red++;

                        if(counter == 0) {

                          var tabela_row = document.createElement('div') 
                          tabela_row.setAttribute('class', 'proizvodi-row promo-banner')
                          // var row_id = 'promo-banner-cena'
                          // tabela_row.setAttribute('id', row_id)
                          tabela_row.innerHTML = '<div class="proizvodi-cell single-image"><a href="https://maxi.sales-snap.com/uvek-niske-cene" target="_self"><img src="https://maxi.sales-snap.com/asset/1372:kategorijeplava-cenahome-page-minpng3" class="promo-banner" id="il1xl"></a></div>'
                          document.getElementById('tabela-proizvoda-popust').append(tabela_row)

                        } else if(counter == 4) {

                          var tabela_row = document.createElement('div') 
                          tabela_row.setAttribute('class', 'proizvodi-row mobile-newsletter')
                          // var row_id = 'mobile-newsletter-cena'
                          // tabela_row.setAttribute('id', row_id)
                          // var njuzleter = document.createElement('script')
                          // njuzleter.setAttribute('src', 'https://maxi.sales-snap.com/form/generate.js?id=6')
                          // tabela_row.append(njuzleter)

                          document.getElementById('tabela-proizvoda-popust').append(tabela_row)

                        } else if(counter == 8) {

                          var tabela_row = document.createElement('div') 
                          tabela_row.setAttribute('class', 'proizvodi-row promo-banner')
                          // var row_id = 'promo-banner'
                          // tabela_row.setAttribute('id', row_id)
                          tabela_row.innerHTML = '<div class="proizvodi-cell single-image"><a href="javascript:void(0)" onclick="getMobileOperatingSystem()"><img src="https://maxi.sales-snap.com/asset/386:shopgo-bannerpng" class="promo-banner" id="il1xl"></a></div>'
                          document.getElementById('tabela-proizvoda-popust').append(tabela_row)

                        }
                      }



                      } else {

                      if(kategorija == '5') {

                      var cell = document.createElement('div')
                      cell.setAttribute('class', 'prozivodi-cell')
                      cell.setAttribute('id', 'cell-popust' + counter)


                      //   var link = document.createElement('a')
                      //   var homepage = 'https://maxi.sales-snap.com/page/preview/20'
                      //   link.setAttribute('href', homepage)
                      //   link.setAttribute('target', '_self')
                      //   link.setAttribute('id', 'link-' + counter)

                      var razmak = document.createElement('br')

                      var slika = document.createElement('img')
                      slika.setAttribute('src', url)
                      slika.setAttribute('id', 'slika-popust' + counter)

                      //   link.append(slika)

                      var naziv_1 = document.createElement('div')
                      naziv_1.setAttribute('id', 'naziv-popust' + counter)
                      naziv_1.setAttribute('class', 'naziv-proizvoda')
                      naziv_1.innerHTML = naziv

                      var stara_cena_1 = document.createElement('div')
                      stara_cena_1.setAttribute('id', 'stara-cena-popust' + counter)
                      var stara_cena_tekst = stara_cena.split('.')
                      if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                      else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                      //   var nova_cena_1 = document.createElement('div')
                      //   nova_cena_1.setAttribute('id', 'nova-cena-' + counter)
                      //   var nova_cena_tekst = nova_cena.split('.')
                      //   if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                      //   else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                      //   var popust_1 = document.createElement('div')
                      //   popust_1.setAttribute('id', 'popust-' + counter)
                      //   popust_1.innerHTML = popust


                      var inner_cell_1 = document.createElement('div')
                      inner_cell_1.setAttribute('class', 'div-inside')
                      inner_cell_1.append(slika)

                      //   var popust_container = document.createElement('div')
                      //   popust_container.setAttribute('class', 'crveni-krug')
                      //   inner_cell_1.append(naziv_1)
                      //   popust_container.append(popust_1)

                        
                      //   inner_cell_1.append(popust_container)
                        inner_cell_1.append(naziv_1)

                      var inner_cell_2 = document.createElement('div')
                      inner_cell_2.setAttribute('class', 'div-inside')
                      // inner_cell_2.append(naziv_1)

                      var zuti_cenovnik = document.createElement('div')
                      zuti_cenovnik.setAttribute('class', 'zuti-cenovnik plava-cena')

                      var cenovnik_left = document.createElement('div')
                      cenovnik_left.setAttribute('class', 'cenovnik-left')
                      cenovnik_left.append(stara_cena_1)

                      // var cenovnik_right = document.createElement('div')
                      // cenovnik_right.setAttribute('class', 'cenovnik-right')
                      // cenovnik_right.append(stara_cena_1)

                      zuti_cenovnik.append(cenovnik_left)
                      // zuti_cenovnik.append(cenovnik_right)

                      inner_cell_2.append(zuti_cenovnik)


                        var outer_cell = document.createElement('div')
                        outer_cell.setAttribute('class', 'slicica-div')
                        outer_cell.append(inner_cell_1)
                        outer_cell.append(inner_cell_2)
                      //   outer_cell.append(cell)

                      //   tabela_row.append(outer_cell)

                      var outer_outer_cell = document.createElement('div')
                      outer_outer_cell.setAttribute('class', 'spoljni-div')
                      outer_outer_cell.append(outer_cell)

                      // tabela_row.append(outer_outer_cell)


                      var rok = document.createElement('div')
                          rok.setAttribute('class', 'trajanje')
                          if(trajanje != undefined) rok.append(trajanje)
                          outer_outer_cell.append(rok)
                          
                          var lokacija = document.createElement('div')
                          lokacija.setAttribute('class', 'lokacija')
                          if(vazenje != undefined) lokacija.append(vazenje)
                          outer_outer_cell.append(lokacija)
                          
                          // console.log(vazenje)
                          
                      var query = 'proizvodi-row-popust-' + (red - 1)

                        

                      document.getElementById(query).append(outer_outer_cell)


                      } else {


                      var cell = document.createElement('div')
                      cell.setAttribute('class', 'prozivodi-cell')
                      cell.setAttribute('id', 'cell-popust-' + counter)

                      var razmak = document.createElement('br')

                      var slika = document.createElement('img')
                      slika.setAttribute('src', url)
                      slika.setAttribute('id', 'slika-popust-' + counter)

                      //   link.append(slika)

                      var naziv_1 = document.createElement('div')
                      naziv_1.setAttribute('id', 'naziv-popust-' + counter)
                      naziv_1.setAttribute('class', 'naziv-proizvoda')
                      naziv_1.innerHTML = naziv

                      var stara_cena_1 = document.createElement('div')
                      stara_cena_1.setAttribute('id', 'stara-cena-popust-' + counter)
                      stara_cena_1.setAttribute('data-id', stara_cena)

                      var stara_cena_tekst = stara_cena.split('.')
                      if(stara_cena_tekst[1] === '00') stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup style="visibility:hidden;">' + stara_cena_tekst[1] + '</sup>'
                        else stara_cena_1.innerHTML = stara_cena_tekst[0] + '<sup>' + stara_cena_tekst[1] + '</sup>'

                      var nova_cena_1 = document.createElement('div')
                      nova_cena_1.setAttribute('id', 'nova-cena-popust-' + counter)
                      nova_cena_1.setAttribute('data-id', nova_cena)
                      var nova_cena_tekst = nova_cena.split('.')

                      if(nova_cena_tekst[1] === '00') nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup style="visibility:hidden;">' + nova_cena_tekst[1] + '</sup>'
                        else nova_cena_1.innerHTML = nova_cena_tekst[0] + '<sup>' + nova_cena_tekst[1] + '</sup>'

                      var popust_1 = document.createElement('div')
                      popust_1.setAttribute('id', 'popust-popust-' + counter)
                      popust_1.innerHTML = popust


                      var inner_cell_1 = document.createElement('div')
                      inner_cell_1.setAttribute('class', 'div-inside')
                      inner_cell_1.append(slika)

                      var popust_container = document.createElement('div')
                      popust_container.setAttribute('class', 'crveni-krug')
                      inner_cell_1.append(naziv_1)
                      popust_container.append(popust_1)


                      inner_cell_1.append(popust_container)
                      //   inner_cell_1.append(naziv_1)

                      var inner_cell_2 = document.createElement('div')
                      inner_cell_2.setAttribute('class', 'div-inside')
                      // inner_cell_2.append(naziv_1)

                      var zuti_cenovnik = document.createElement('div')
                      zuti_cenovnik.setAttribute('class', 'zuti-cenovnik')

                      var cenovnik_left = document.createElement('div')
                      cenovnik_left.setAttribute('class', 'cenovnik-left')
                      cenovnik_left.append(nova_cena_1)

                      var cenovnik_right = document.createElement('div')
                      cenovnik_right.setAttribute('class', 'cenovnik-right')
                      cenovnik_right.append(stara_cena_1)

                      zuti_cenovnik.append(cenovnik_left)
                      zuti_cenovnik.append(cenovnik_right)

                      inner_cell_2.append(zuti_cenovnik)


                      var outer_cell = document.createElement('div')
                      outer_cell.setAttribute('class', 'slicica-div')
                      outer_cell.append(inner_cell_1)
                      outer_cell.append(inner_cell_2)
                      //   outer_cell.append(cell)

                      //   tabela_row.append(outer_cell)

                      var outer_outer_cell = document.createElement('div')
                      outer_outer_cell.setAttribute('class', 'spoljni-div')
                      outer_outer_cell.append(outer_cell)



                      // tabela_row.append(outer_outer_cell)


                      var rok = document.createElement('div')
                      rok.setAttribute('class', 'trajanje')

                      if(trajanje != undefined) rok.append(trajanje)
                      outer_outer_cell.append(rok)
                        
                      var lokacija = document.createElement('div')
                      lokacija.setAttribute('class', 'lokacija')

                      if(vazenje != undefined) lokacija.append(vazenje)
                      outer_outer_cell.append(lokacija)
                        
                        // console.log(vazenje)
                        
                      var query = 'proizvodi-row-popust-' + (red - 1)



                      document.getElementById(query).append(outer_outer_cell)

                      // KALKULATOR START
                      var kalkulator = document.createElement('div')
                      kalkulator.setAttribute('class', 'kalkulator')


                      var selektor_kalkulatora = document.createElement('div')
                      selektor_kalkulatora.setAttribute('class','selektor-kalkulatora')

                      var cekboks = document.createElement('input')
                      cekboks.setAttribute('class','cekboks-kalkulatora')
                      cekboks.setAttribute('type', 'checkbox')

                      var span_cekboks = document.createElement('span')
                      span_cekboks.setAttribute('class', 'checkmark')

                      var telo_kalkulatora = document.createElement('div')
                      telo_kalkulatora.setAttribute('class','telo-kalkulatora')
                      telo_kalkulatora.setAttribute('style', 'display:none;')

                      var minus_dugme = document.createElement('button')
                      minus_dugme.setAttribute('class','decrease')
                      minus_dugme.innerHTML = '-'

                      var kolicina = document.createElement('span')
                      kolicina.setAttribute('class', 'kolicina')
                      kolicina.innerHTML = '0'

                      var plus_dugme = document.createElement('button')
                      plus_dugme.setAttribute('class','increase')
                      plus_dugme.innerHTML = '+'

                      var iznos_popusta = document.createElement('span')
                      iznos_popusta.setAttribute('class', 'popust-artikal')
                      iznos_popusta.setAttribute('style', 'display:none')
                      iznos_popusta.innerHTML = '0'

                      telo_kalkulatora.append(minus_dugme)
                      telo_kalkulatora.append(kolicina)
                      telo_kalkulatora.append(plus_dugme)
                      telo_kalkulatora.append(iznos_popusta)

                      selektor_kalkulatora.append(cekboks)
                      selektor_kalkulatora.append(span_cekboks)
                      // selektor_kalkulatora.append(telo_kalkulatora)
                      kalkulator.append(selektor_kalkulatora)

                      outer_outer_cell.prepend(kalkulator)
                      outer_outer_cell.append(telo_kalkulatora)

                      // KALKULATOR END
                      }



                    }
                      counter++

                });
              
            } 

            async function createSearch() {
              
              const response = await fetch('tabele/pocetna.csv', {cache:"no-store"});
                // const response = await fetch('https://maxi.sales-snap.com/asset/194:nazivi-i-cene-artikala-za-digital-lifletcsv');
                const data = await response.text();
                
                const name_row = data.split('\n')

                const rows = data.split('\n').slice(1)

                rows.forEach(element => {
                    const row = element.split(';')
                    const link = row[0]
                    const naziv = row[1]
              
                    let option_link_element = document.createElement('a')
                    let option_link_href = ''

                    switch(link) {
                      case '1': 
                        option_link_href = 'izaberi-uvek-sveze.html'
                        break;

                      case '2': 
                        option_link_href = 'uzivaj-u-ukusnom-delikatesu.html'
                        break;

                      case '3': 
                        option_link_href = 'pripremi-ukusan-obrok.html'
                        break;
                      
                      case '4': 
                        option_link_href = 'gricni-i-osvezi-se.html'
                        break;
                      
                      case '5': 
                        option_link_href = 'plava-cena.html'
                        break;
                    }

                    option_link_element.setAttribute('href', option_link_href)
                    option_link_element.innerText = naziv

                    let option_list_item = document.createElement('li')
                    option_list_item.append(option_link_element)

                    document.getElementById('myUL').append(option_list_item)

              });


            }


        // getDataSidebar()         
        getData()    
        getDataSortPrice()
        getDataSortDiscount() 
        createSearch()  
        
        
     
        if(window.innerWidth > 1000) determineWindowWidth(80, '.slick-initialized:not(.banner-slider-mobile)')    
            else determineWindowWidth(77, '.slick-initialized.banner-slider-mobile')  
        
        // setTimeout(function() {

        
        //   document.querySelector('img.cover.home.close-menu').addEventListener('click', function() {
        //     determineWindowWidth(75) 
        //   })

        // }, 2000)
             
      </script>
      
         
      <!-- NEW NAV -->
      <nav class="nav__cont" id="interactiveNav"  >
        <ul class="nav">
          <li class="nav__items">
              <!-- redesign  -->
              <img class="cover home close-menu" src="/SVG/close.svg">
              <!-- redesign -->
              <a class="home" href="https://shopandgo.in.rs" target="_self" >
              <img id="nav_pocetna" onclick="clickNavLink(event)" class="cover home" src="https://maxi.sales-snap.com/asset/1486:homepng1">
            </a>
          </li> 

          <!--   <nav onmouseenter="enterNav()" onmouseleave="leaveNav()"></nav> -->
          <!-- <li class="nav__items"> -->
              <!-- <p class="top-ponuda">POGLEDAJ TOP PONUDU</p><br/> -->
            <!--  <img height="100" width="100" class="down-arrow" onclick="expandNav(event)" src="https://maxi.sales-snap.com/asset/112:arrow-downpng"> -->
          <!-- </li> -->
          
          <!-- NOVI SIDEBAR             -->
          <li id="sidebar_proizvod_1" class="nav__items">
            <a href="izaberi-uvek-sveze.html">
              <div class="spoljni-div">
                <img src="https://maxi.sales-snap.com/asset/1487:izaberi-uvek-svezepng1" alt="izaberi uvek sveze">
                <p class="top-ponuda">IZABERI UVEK SVE≈ΩE</p>
              </div>
            </a>
          </li>          
          <li id="sidebar_proizvod_2" class="nav__items">
            <a href="uzivaj-u-ukusnom-delikatesu.html">
              <div class="spoljni-div">
                <img src="https://maxi.sales-snap.com/asset/1488:delikatespng" alt="uzivaj u ukusnom delikatesu">
                <p class="top-ponuda">U≈ΩIVAJ U UKUSNOM DELIKATESU</p>
              </div>
            </a>
          </li> 
          <li id="sidebar_proizvod_3" class="nav__items">
            <a href="pripremi-ukusan-obrok.html">
              <div class="spoljni-div">
                <img src="https://maxi.sales-snap.com/asset/1489:ukusan-obrokpng" alt="pripremi ukusan obrok">
                <p class="top-ponuda">PRIPREMI UKUSAN OBROK</p>
              </div>
            </a>
          </li>   
          <li id="sidebar_proizvod_4" class="nav__items">
            <a href="gricni-i-osvezi-se.html">
              <div class="spoljni-div">
                <img src="https://maxi.sales-snap.com/asset/1490:gricnipng" alt="gricni i osvezi se">
                <p class="top-ponuda">GRICNI I OSVE≈ΩI SE</p>
              </div>
            </a>
          </li>   
          <li id="sidebar_proizvod_5" class="nav__items">

          </li>           
          
          <!-- <li class="nav__items">
              <a href="https://www.maxi.rs/?utm_source=SG_Liflet&utm_medium=SG_liflet_ikonica&utm_campaign=SG" target="_self"><img style="padding:10px !important;" id="pripremi_obrok_piktogram" class="cover" src="https://maxi.sales-snap.com/asset/888:artboard-2-1png"></a>
          </li>             -->
            
        </ul>

        <!-- redesign -->
        <div class="show-more-nav-button">show more</div>
        <!-- redesign -->
      </nav>

      <script>
         function expandNav(event) {
         
            event.stopPropagation()
             
            if(document.getElementById('interactiveNav').classList.contains('openNav')) document.getElementsByClassName('openListItem')[0].classList.remove('openListItem')

            document.getElementById('interactiveNav').classList.add('openNav')
         
            event.target.parentElement.classList.add('openListItem')
         
         }
         
         function enterNav() {

            document.getElementById('interactiveNav').classList.add('openNav')
            document.getElementsByClassName('nav__items')[0].classList.add('openListItem')
            document.getElementsByClassName('nav__items')[1].classList.add('openListItem')
            document.getElementsByClassName('nav__items')[2].classList.add('openListItem')
            document.getElementsByClassName('nav__items')[3].classList.add('openListItem')
            document.getElementsByClassName('nav__items')[4].classList.add('openListItem')
         }
         
         function leaveNav() {

            document.getElementById('interactiveNav').classList.remove('openNav')
            document.getElementsByClassName('nav__items')[0].classList.remove('openListItem')
            document.getElementsByClassName('nav__items')[1].classList.remove('openListItem')
            document.getElementsByClassName('nav__items')[2].classList.remove('openListItem')
            document.getElementsByClassName('nav__items')[3].classList.remove('openListItem')
            document.getElementsByClassName('nav__items')[4].classList.remove('openListItem')

         }    

      </script>

      <div id="glavni-kontejner" onclick="closeNav(event)" class="kontejner">
        <!-- redesign  -->
        <img class="burger-menu" src="SVG/burger2.svg">
        <!-- redesign  -->
        <script>

            function closeNav(event) {
            
                if(document.getElementById('interactiveNav').classList.contains('openNav')) {

                  event.preventDefault()
                  document.getElementById('interactiveNav').classList.remove('openNav')
                  document.getElementsByClassName('openListItem')[0].classList.remove('openListItem')

                } else if(event.target.parentElement.hasAttribute('href') && event.target.parentElement.parentElement.parentElement.classList.contains('tabela-social-div')) {

                    window.open(event.target.parentElement.getAttribute('href'), "_blank")

                } else if(event.target.parentElement.hasAttribute('href') && event.target.parentElement.parentElement.parentElement.classList.contains('happy-hour')) {

                    window.open(event.target.parentElement.getAttribute('href'), "_blank")

                } else if (event.target.parentElement.hasAttribute('href') && !event.target.parentElement.parentElement.classList.contains('social')) {

                    window.location = event.target.parentElement.getAttribute('href')

                }
                
            }
            
            function clickNavLink(event) {
            
                window.location = event.target.parentElement.getAttribute('href')

            }
            
        </script>

         <div class="header-div" id="in2db">
            <div class="levo-header">
            </div>
            <center><a href="index.html" target="_self"><img src="https://maxi.sales-snap.com/asset/119:logopng" id="iw2i"></a></center>
            <div class="desno-header">
            </div>
         </div>
          <!-- redesign -->
          <div style="display: none;" class="banner-slider">
            <img src="dummy_pictures/banner1.png"/>
            <img src="dummy_pictures/banner2.png"/>
            <img src="dummy_pictures/banner3.png"/>
          </div>
          <div class="banner-slider-mobile">
            <img src="dummy_pictures/banner-mob1.png"/>
            <img src="dummy_pictures/banner-mob2.png"/>
            <img src="dummy_pictures/banner-mob3.png"/>
          </div>
          <!-- redesign -->
         <div class="search-wrapper">
           <img class="search-icon" src="/SVG/search.svg"/>
          <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Pretra≈æi proizvode..">

          <ul id="myUL">

          </ul>
         </div>



        <script>

          function myFunction() {

            // Declare variables
            var input, filter, ul, li, a, i, txtValue;
            input = document.getElementById('myInput');
            filter = input.value.toUpperCase();
            ul = document.getElementById("myUL");
            li = ul.getElementsByTagName('li');
          
            // Loop through all list items, and hide those who don't match the search query
            for (i = 0; i < li.length; i++) {
              a = li[i].getElementsByTagName("a")[0];
              txtValue = a.textContent || a.innerText;
              if (txtValue.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
              } else {
                li[i].style.display = "none";
              }
            }
          }

        </script>


        <!-- <div class="online-katalog-slika-div" id="i2ztu">
            <center>
               <img src="https://maxi.sales-snap.com/asset/974:home-banner1367x547png1" class="desktop-banner"><img src="https://maxi.sales-snap.com/asset/975:home-bannermobpng2" class="mobile-banner">
            </center>
        </div> -->
        
        <div class="kategorije-div" id="ikr01">
            <center>
               <h1 id="izh1f">Pogledaj na&scaron;u nedeljnu ponudu
               </h1>
            </center>
            <div id="borderBottom">
            </div>
        </div>
         <!-- redesign -->
         <div class="sort-wrapper">
            <div class="sort-button">
                SORTIRAJ ARTIKLE
            </div>
            <div class="price-sort">
                sortiraj po ceni
                <div class="close-button">X</div>
            </div>
            <div class="discount-sort">
                sortiraj po popustu
                <div class="close-button">X</div>
            </div>
        </div>
        <!-- redesign -->
        <div id="kalkulator">
          <div id="proizvod_1" style="text-align:center;">
              <span>Ukupna u≈†teda: </span>
              <span class="usteda">0</span>
              <span> din</span>
          </div>
          
        
        </div>    

        <div class="tabela-proizvoda-div kategorije" >

          <div class="proizvodi-row" id="tabela-proizvoda">
              <!-- SVI NESORTIRANI PROIZVODI -->

        </div>

      </div>

      <div class="tabela-proizvoda-div kategorije sortirana-cena" >

        <div class="proizvodi-row" id="tabela-proizvoda-cena">
            <!-- SVI SORTIRANI PROIZVODI - NAJMANJA CENA -->
            
        </div>


      </div>   
    

      <div class="tabela-proizvoda-div kategorije sortirani-popust" >

        <div class="proizvodi-row" id="tabela-proizvoda-popust">
            <!-- SVI SORTIRANI PROIZVODI - NAJMANJA CENA -->
            
        </div>


      </div>   


      <script>
            
        // KALKULATOR START  
        function oduzimanje(event) {
            
            if(parseInt($(event.target).parents('.spoljni-div').find('.kolicina').text()) < 2) {

                var stara_cena = parseFloat($(event.target).parents('.spoljni-div').find('div[id*="stara-cena"]').attr('data-id'))
                var nova_cena = parseFloat($(event.target).parents('.spoljni-div').find('div[id*="nova-cena"]').attr('data-id'))
                var razlika = parseFloat(parseFloat(stara_cena - nova_cena).toFixed(2))
                var trenutna_usteda = parseFloat($('.usteda').text())
                var nova_usteda = parseFloat(trenutna_usteda - razlika).toFixed(2)
                $('.usteda').text(nova_usteda)
                $(event.target).parents('.spoljni-div').find('.kolicina').text('0')
                $(event.target).attr('disabled', 'disabled')
                
                var trenutna_usteda_artikal = parseFloat($(event.target).parents('.spoljni-div').find('.popust-artikal').text())
                var nova_usteda_artikal = parseFloat(trenutna_usteda_artikal - razlika).toFixed(2)
                $(event.target).parents('.spoljni-div').find('.popust-artikal').text(nova_usteda_artikal)
                
            } else {

                $(event.target).parents('.spoljni-div').find('.kolicina').text(parseInt($(event.target).parents('.spoljni-div').find('.kolicina').text()) - 1)
                var stara_cena = parseFloat($(event.target).parents('.spoljni-div').find('div[id*="stara-cena"]').attr('data-id'))
                var nova_cena = parseFloat($(event.target).parents('.spoljni-div').find('div[id*="nova-cena"]').attr('data-id'))
                var razlika = parseFloat(parseFloat(stara_cena - nova_cena).toFixed(2))
                
                var trenutna_usteda = parseFloat($('.usteda').text())
                var nova_usteda = parseFloat(trenutna_usteda - razlika).toFixed(2)
                $('.usteda').text(nova_usteda)
                
                var trenutna_usteda_artikal = parseFloat($(event.target).parents('.spoljni-div').find('.popust-artikal').text())
                var nova_usteda_artikal = parseFloat(trenutna_usteda_artikal - razlika).toFixed(2)
                $(event.target).parents('.spoljni-div').find('.popust-artikal').text(nova_usteda_artikal)
                
            }
            
        }
        
        function sabiranje(event) {
            
            if($(event.target).parents('.spoljni-div').find('.decrease').attr('disabled') == 'disabled') $(event.target).parents('.spoljni-div').find('.decrease').removeAttr('disabled')
            
            $(event.target).parents('.spoljni-div').find('.kolicina').text(parseInt($(event.target).parents('.spoljni-div').find('.kolicina').text()) + 1)
            var stara_cena = parseFloat($(event.target).parents('.spoljni-div').find('div[id*="stara-cena"]').attr('data-id'))
            var nova_cena = parseFloat($(event.target).parents('.spoljni-div').find('div[id*="nova-cena"]').attr('data-id'))
            var razlika = parseFloat(parseFloat(stara_cena - nova_cena).toFixed(2))
            var trenutna_usteda = parseFloat($('.usteda').text())
            var nova_usteda = parseFloat(parseFloat(trenutna_usteda + razlika).toFixed(2))
            $('.usteda').text(nova_usteda)
            
            
            var trenutna_usteda_artikal = parseFloat($(event.target).parents('.spoljni-div').find('.popust-artikal').text())
            
         
            var nova_usteda_artikal = parseFloat(parseFloat(trenutna_usteda_artikal + razlika).toFixed(2))
                
            $(event.target).parents('.spoljni-div').find('.popust-artikal').text(nova_usteda_artikal)

        }
        
        function oduzmiSve(event) {

            $(event.target).parents('.spoljni-div').find('.kolicina').text('0')
            var trenutna_usteda_artikal = parseFloat($(event.target).parents('.spoljni-div').find('.popust-artikal').text())
            var nova_usteda = parseFloat(parseFloat(parseFloat($('.usteda').text()) - trenutna_usteda_artikal).toFixed(2))
            $('.usteda').text(nova_usteda)
            $(event.target).parents('.spoljni-div').find('.popust-artikal').text('0')

        }
    
    
    
    
    
    
        setTimeout(function() {
            document.querySelectorAll('.cekboks-kalkulatora').forEach(item => {
                item.addEventListener('click', event => {
                        
                    if(event.target.checked) {
                        $(event.target).parents('.spoljni-div').children('.telo-kalkulatora').css('display', 'block')
                        // $(event.target).next().find('.kolicina').text('1')
                        sabiranje(event)

                    } else {

                        $(event.target).parents('.spoljni-div').children('.telo-kalkulatora').css('display', 'none')
                        // $(event.target).next().find('.kolicina').text('0')
                        oduzmiSve(event)
                    }

                })
            })
        }, 1000)
    
        setTimeout(function() {
            document.querySelectorAll('.decrease').forEach(item => {
                item.addEventListener('click', event => {
                        
                    oduzimanje(event)
                        
                        
                        
                })
            })
        }, 1000)
    
        setTimeout(function() {
            document.querySelectorAll('.increase').forEach(item => {
                item.addEventListener('click', event => {
                        
                    sabiranje(event)
                        
                        
                        
                })
            })
        }, 1000)



        // SORT

        function sortPrice() {
          $('.tabela-proizvoda-div.kategorije:not(.sortirana-cena)').css('display', 'none')
          $('.tabela-proizvoda-div.kategorije:not(.sortirana-cena) .cekboks-kalkulatora:checked').click()

          $('.mobile-newsletter-wrapper').appendTo('.tabela-proizvoda-div.kategorije.sortirana-cena .mobile-newsletter')
          $('.tabela-proizvoda-div.kategorije.sortirana-cena').css('display', 'block')

        }

        function sortDiscount() {
          $('.tabela-proizvoda-div.kategorije:not(.sortirani-popust)').css('display', 'none')
          $('.tabela-proizvoda-div.kategorije:not(.sortirani-popust) .cekboks-kalkulatora:checked').click()

          $('.mobile-newsletter-wrapper').appendTo('.tabela-proizvoda-div.kategorije.sortirani-popust .mobile-newsletter')
          $('.tabela-proizvoda-div.kategorije.sortirani-popust').css('display', 'block')
        }

        function resetSort() {
          $('.tabela-proizvoda-div.kategorije.sortirani-popust').css('display', 'none')
          $('.tabela-proizvoda-div.kategorije.sortirani-popust .cekboks-kalkulatora:checked').click()

          $('.tabela-proizvoda-div.kategorije.sortirana-cena').css('display', 'none')
          $('.tabela-proizvoda-div.kategorije.sortirana-cena .cekboks-kalkulatora:checked').click()
          
          $('.mobile-newsletter-wrapper').appendTo('.tabela-proizvoda-div.kategorije:not(.sortirana-cena):not(.sortirani-popust) .mobile-newsletter')
          $('.tabela-proizvoda-div.kategorije:not(.sortirana-cena):not(.sortirani-popust)').css('display', 'block')
        }


        document.querySelector('.price-sort').addEventListener('click', function() {
          sortPrice()
        })

        document.querySelector('.discount-sort').addEventListener('click', function() {
          sortDiscount()
        })

        document.querySelector('.price-sort .close-button').addEventListener('click', function() {
          resetSort()
        })

        document.querySelector('.discount-sort .close-button').addEventListener('click', function() {
          resetSort()
        })

        document.querySelector('.sort-button').addEventListener('click', function() {
          if(document.querySelector('.close-button.sort-display-block') != null) document.querySelector('.close-button.sort-display-block').click()
        })




        // redesign
        $(document).ready(function(){
          // close sidebar 
          $('.close-menu').on('click', function(){
              setTimeout(function(){
                  $('#interactiveNav').addClass('side-bar-slide-left')
                  $('#interactiveNav').removeClass('side-bar-slide-right')
                  $('#glavni-kontejner').addClass('margin-reset-menu-active')
              }, 200);
          })
          $('.burger-menu').on('click', function(){
              setTimeout(function(){
                  $('#interactiveNav').removeClass('side-bar-slide-left')
                  $('#interactiveNav').addClass('side-bar-slide-right')
                  $('#glavni-kontejner').removeClass('margin-reset-menu-active')
              }, 200);
          })
          // close sidebar 
          // slick slider 
          // https://kenwheeler.github.io/slick/
          $('.banner-slider').slick({
              infinite: true,
              dots: true,
              autoplay: true,
              speed: 500
          });
          $('.banner-slider-mobile').slick({
              infinite: true,
              dots: true,
              autoplay: true,
              speed: 500
          });
          // slick slider 
          // sorting options 
          $('.sort-button').on('click', function(){
            $('.price-sort').toggleClass('sort-display-block')
            $('.discount-sort').toggleClass('sort-display-block')
          })
          $('.sort-wrapper .close-button').on('click', function(e){
            e.stopPropagation()
            $(this).parent().removeClass('active-sort')
            $(this).removeClass('sort-display-block')
          })
          $('.sort-wrapper .price-sort').on('click', function(){
            $('.price-sort').addClass('active-sort')
            $('.discount-sort').removeClass('active-sort')
            $(this).children('.close-button').addClass('sort-display-block')
            $('.discount-sort .close-button').removeClass('sort-display-block')
          })
          $('.sort-wrapper .discount-sort').on('click', function(){
            $('.discount-sort').addClass('active-sort')
            $('.price-sort').removeClass('active-sort')
            $('.price-sort .close-button').removeClass('sort-display-block')
            $(this).children('.close-button').addClass('sort-display-block')
          })
          // sorting options 
          // scroll
          $('#interactiveNav').scroll(function() {
            if($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
              $('.show-more-nav-button').addClass('hide-opacity')
            }else if($('.show-more-nav-button').hasClass('hide-opacity')){
              $('.show-more-nav-button').removeClass('hide-opacity')
            }
          });
          // scroll 
          // search options 
          $('.search-wrapper #myInput').on('keyup', function(){
            if($(this).val() !== ''){
              console.log('keyup on not empty input')
              $('.search-wrapper #myUL').addClass('visible-search-results')
            }else{
              console.log('keyup on empty input')
              $('.search-wrapper #myUL').removeClass('visible-search-results')
            }
          })
          // search options 
          // newsletter 
          var submitMask = '<div class="submit-mask"></div>'
          $('[id="mauticform_njuzleterkatalogforma_prijavite_se_za_newslette"]').append(submitMask)
          $('.submit-mask').on('click', function(e){
            $(e.target).parent().next().children('button').click()
          })
          // newsletter 
        });
        // redesign
    
    </script>     

         <div class="ljubicasta-pozadina" id="it2p99">
            <div class="proizvodi-row footer">
               <div class="proizvodi-cell single-image f-sekcija">

                <!-- SALES SNAP NEWSLETTER FORM -->
                 <script type="text/javascript" src="https://maxi.sales-snap.com/form/generate.js?id=6"></script> 
                  
               </div>
            </div>

            <div class="aplikacije-div">
               <div id="borderTop">
               </div>

               <div class="tabela-social-div">
                  <div class="social-cell-facebook"><a href="https://sr-rs.facebook.com/shopandgosrbija/" target="_blank"><img src="https://maxi.sales-snap.com/asset/139:fbpng" id="im987"></a></div>
                  <div class="social-cell-instagram"><a href="https://www.instagram.com/shopandgosrbija/" target="_blank"><img src="https://maxi.sales-snap.com/asset/140:igpng" id="i8mcf"></a></div>
                  <!--                 <div class="social-cell-linkedin"><a href="https://www.linkedin.com/company/delhaize-serbia/?originalSubdomain=rs" target="_blank"><img src="https://maxi.sales-snap.com/asset/141:lnpng" id="iputik"></a></div> -->
                  <div class="social-cell-youtube"><a href="https://www.youtube.com/channel/UCDDgelQ8MvzfqCY-Y5gyKLw" target="_blank"><img src="https://maxi.sales-snap.com/asset/142:ytpng" id="iputik"></a></div>
               </div>

               <!-- <div class="tabela-aplikacije-div">
                  <div class="aplikacije-cell"><a onclick="getMobileOperatingSystem()" href="javascript:void(0)" target="_blank"><img src="https://maxi.sales-snap.com/asset/386:shopgo-bannerpng" id="im987-2"></a></div>
                                  <div class="aplikacije-cell"><a href="https://apps.apple.com/us/app/moj-maxi/id1557471653" target="_blank"><img src="https://maxi.sales-snap.com/asset/138:googleplaybuttonpng" id="im987"></a></div>
                     <div class="aplikacije-cell"><a href="https://play.google.com/store/apps/details?id=com.delhaize.maxi.loyalty" target="_blank"><img src="https://maxi.sales-snap.com/asset/136:appstorepng" id="i8mcf"></a></div>
                     <div class="aplikacije-cell"><a href="https://appgallery.huawei.com/app/C105399993" target="_blank"><img src="https://maxi.sales-snap.com/asset/137:appgallerypng" id="iputik"></a></div>
               </div> -->
            </div>

            <div class="footer">

               <div class="f-sekcija">
                <br>
                <a href="#" style="font-weight:bold;text-decoration:unset;">Potrebna vam je pomoƒá?</a>
                <br>
                <a href="#" style="text-decoration:unset;">ƒåesto postavljana pitanja</a>
                <!-- <br>
                  <a href="https://maxi.sales-snap.com/o-kompaniji">O kompaniji</a> -->
                  <br>
                  <a style="text-decoration:unset;" href="tel:0800-3537030">Kontaktirajte nas</a>
                  <br>
                  <a style="text-decoration:unset;" href="https://maxi.sales-snap.com/o-kompaniji">Kontakt i podaci o kompaniji</a>
                  <!-- <a href="https://maxi.sales-snap.com/kolacici">Politika kola&#269;i&#263;a</a> -->
                  <br><br><br>
               </div>
            </div>
         </div>
      </div>
        
   </body>
</html>